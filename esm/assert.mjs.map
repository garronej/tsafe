{"version":3,"file":"assert.mjs","sources":["../dist/src/assert.ts"],"sourcesContent":["import { overwriteReadonlyProp } from \"./lab/overwriteReadonlyProp\";\nimport { assertIsRefWrapper } from \"./zz_internal/assertIsRefWrapper\";\nexport type { Equals } from \"./Equals\";\n\n/** @see <https://docs.tsafe.dev/assert#error-thrown> */\nexport class AssertionError extends Error {\n    originalMessage?: string;\n\n    constructor(msg: string | undefined) {\n        super(`Wrong assertion encountered` + (!msg ? \"\" : `: \"${msg}\"`));\n\n        this.originalMessage = msg;\n\n        Object.setPrototypeOf(this, new.target.prototype);\n\n        if (!this.stack) {\n            return;\n        }\n\n        try {\n            overwriteReadonlyProp(\n                this,\n                \"stack\",\n                this.stack\n                    .split(\"\\n\")\n                    .filter((...[, i]) => i !== 1 && i !== 2)\n                    .join(\"\\n\"),\n            );\n        } catch {}\n    }\n}\n\n/** https://docs.tsafe.dev/assert */\nexport function assert<_T extends true>(\n    condition?: any,\n    msg?: string | (() => string),\n): asserts condition {\n    if (arguments.length === 0) {\n        condition = true;\n    }\n    if (assertIsRefWrapper.ref !== undefined) {\n        assertIsRefWrapper.ref = undefined;\n        return;\n    }\n\n    if (!condition) {\n        throw new AssertionError(typeof msg === \"function\" ? msg() : msg);\n    }\n}\n"],"names":[],"mappings":";;;AAIA;AACM,MAAO,cAAe,SAAQ,KAAK,CAAA;AAGrC,IAAA,WAAA,CAAY,GAAuB,EAAA;AAC/B,QAAA,KAAK,CAAC,CAA6B,2BAAA,CAAA,IAAI,CAAC,GAAG,GAAG,EAAE,GAAG,CAAA,GAAA,EAAM,GAAG,CAAG,CAAA,CAAA,CAAC,CAAC,CAAC;AAElE,QAAA,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAE3B,MAAM,CAAC,cAAc,CAAC,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;AAElD,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACb,OAAO;SACV;AAED,QAAA,IAAI;AACA,YAAA,qBAAqB,CACjB,IAAI,EACJ,OAAO,EACP,IAAI,CAAC,KAAK;iBACL,KAAK,CAAC,IAAI,CAAC;AACX,iBAAA,MAAM,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACxC,iBAAA,IAAI,CAAC,IAAI,CAAC,CAClB,CAAC;SACL;QAAC,MAAM,GAAE;KACb;AACJ,CAAA;AAED;AACgB,SAAA,MAAM,CAClB,SAAe,EACf,GAA6B,EAAA;AAE7B,IAAA,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;QACxB,SAAS,GAAG,IAAI,CAAC;KACpB;AACD,IAAA,IAAI,kBAAkB,CAAC,GAAG,KAAK,SAAS,EAAE;AACtC,QAAA,kBAAkB,CAAC,GAAG,GAAG,SAAS,CAAC;QACnC,OAAO;KACV;IAED,IAAI,CAAC,SAAS,EAAE;AACZ,QAAA,MAAM,IAAI,cAAc,CAAC,OAAO,GAAG,KAAK,UAAU,GAAG,GAAG,EAAE,GAAG,GAAG,CAAC,CAAC;KACrE;AACL;;;;"}