{"version":3,"file":"overwriteReadonlyProp.mjs","sources":["../../dist/src/lab/overwriteReadonlyProp.ts"],"sourcesContent":["/* eslint-disable no-empty */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Assign a value to a property even if the object is freezed or if the property is not writable\n * Throw if the assignation fail ( for example if the property is non configurable write: false )\n * */\nexport const overwriteReadonlyProp = <T extends { [key: string]: any }, K extends keyof T>(\n    obj: T,\n    propertyName: K,\n    value: T[K],\n): T[K] => {\n    try {\n        obj[propertyName] = value;\n    } catch {}\n\n    if (obj[propertyName] === value) {\n        return value;\n    }\n\n    let errorDefineProperty: Error | undefined = undefined;\n\n    const propertyDescriptor: PropertyDescriptor = Object.getOwnPropertyDescriptor(\n        obj,\n        propertyName,\n    ) || {\n        \"enumerable\": true,\n        \"configurable\": true,\n    };\n\n    if (!!propertyDescriptor.get) {\n        throw new Error(`Probably a wrong ides to overwrite ${String(propertyName)} getter`);\n    }\n\n    try {\n        Object.defineProperty(obj, propertyName, {\n            ...propertyDescriptor,\n            value,\n        });\n    } catch (error) {\n        errorDefineProperty = error as Error;\n    }\n\n    if (obj[propertyName] !== value) {\n        throw errorDefineProperty || new Error(\"Can't assign\");\n    }\n\n    return value;\n};\n"],"names":[],"mappings":"AAAA;AACA;AAEA;;;AAGK;AACQ,MAAA,qBAAqB,GAAG,CACjC,GAAM,EACN,YAAe,EACf,KAAW,KACL;IACN,IAAI;AACA,QAAA,GAAG,CAAC,YAAY,CAAC,GAAG,KAAK,CAAC;AAC7B,KAAA;AAAC,IAAA,MAAM,GAAE;AAEV,IAAA,IAAI,GAAG,CAAC,YAAY,CAAC,KAAK,KAAK,EAAE;AAC7B,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;IAED,IAAI,mBAAmB,GAAsB,SAAS,CAAC;IAEvD,MAAM,kBAAkB,GAAuB,MAAM,CAAC,wBAAwB,CAC1E,GAAG,EACH,YAAY,CACf,IAAI;AACD,QAAA,YAAY,EAAE,IAAI;AAClB,QAAA,cAAc,EAAE,IAAI;KACvB,CAAC;AAEF,IAAA,IAAI,CAAC,CAAC,kBAAkB,CAAC,GAAG,EAAE;QAC1B,MAAM,IAAI,KAAK,CAAC,CAAsC,mCAAA,EAAA,MAAM,CAAC,YAAY,CAAC,CAAS,OAAA,CAAA,CAAC,CAAC;AACxF,KAAA;IAED,IAAI;AACA,QAAA,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,YAAY,EAAE;AACrC,YAAA,GAAG,kBAAkB;YACrB,KAAK;AACR,SAAA,CAAC,CAAC;AACN,KAAA;AAAC,IAAA,OAAO,KAAK,EAAE;QACZ,mBAAmB,GAAG,KAAc,CAAC;AACxC,KAAA;AAED,IAAA,IAAI,GAAG,CAAC,YAAY,CAAC,KAAK,KAAK,EAAE;AAC7B,QAAA,MAAM,mBAAmB,IAAI,IAAI,KAAK,CAAC,cAAc,CAAC,CAAC;AAC1D,KAAA;AAED,IAAA,OAAO,KAAK,CAAC;AACjB;;;;"}